# Example Server Functions

From https://github.com/VapiAI/server-example-javascript-deno

When a function is configured in a Vapi assistant, Vapi will detect when the LLM makes a function
call and forward the request to a server.

Use the function examples in this folder for local development and testing.

## Local Dev

1. Start the local functions server

```bash
deno run --allow-net --allow-env index.ts
```

2. Use ngrok to proxy to local server

```bash
ngrok http http://localhost:8000
# ngrok generates a url to use in vapi
```

3. Configure Vapi assistant to use ngrok URL for server url

In [Vapi Dashboard > Assistants](https://dashboard.vapi.ai/assistants/) > Advanced tab

Under Messaging, add url generated by ngrok to `Server URL`.

Then select `Server Messages` options to control what messages Vapi sends to the local dev server.

**IMPORTANT**: do not set the Server URL for an assistant in production unless you want all the
messages to stream to your local dev server. Instead, duplicate an assistant and use it to connect
to the local dev server.

## Assistant Config

Example functions definition for assistant API:

```json
"functions": [
  {
    "name": "getRandomName",
    "description": "Generates a random name based on optional gender and nationality",
    "parameters": {
      "type": "object",
      "properties": {
        "gender": { "type": "string", "enum": ["male", "female"],
          "description": "The gender for which to generate a name." },
        "nat": { "type": "string",
          "description": "The nationality based on which to generate a name. Example: IN for India, US for United States of America or USA and so on." }
      }
    }
  },
```
